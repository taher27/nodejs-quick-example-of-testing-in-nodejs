// ********RoostGPT********
/*
Test generated by RoostGPT for test testJ using AI Type Open AI and AI Model gpt-4

ROOST_METHOD_HASH=processResults_44e0f4b06e
ROOST_METHOD_SIG_HASH=processResults_30cabeaee6


*/

// ********RoostGPT********
const { processResults } = require('../weather/fetch-weather');
const { kelvinToCelcius, getRainFall } = require('../weather/utils');

describe('processResults', () => {
  let allResults;

  beforeEach(() => {
    allResults = {
      main: {
        temp_min: 280,
        temp_max: 290,
      },
      rain: {
        '3h': 0.76
      },
      clouds: {
        all: 90
      }
    };
  });

  it('should correctly process results', () => {
    const result = processResults(allResults);
    expect(result).toEqual({
      minTemp: kelvinToCelcius(allResults.main.temp_min),
      maxTemp: kelvinToCelcius(allResults.main.temp_max),
      chanceRain: 0.83,
      rainFall: getRainFall(allResults.rain),
      cloudCover: allResults.clouds.all
    });
  });

  it('should return default values if no results', () => {
    const result = processResults(null);
    expect(result).toEqual({
      minTemp: kelvinToCelcius(10),
      maxTemp: kelvinToCelcius(10),
      chanceRain: 0.83,
      rainFall: getRainFall(undefined),
      cloudCover: 10
    });
  });
});
